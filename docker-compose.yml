services:
  lottobot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: lottobot
    restart: unless-stopped

    environment:
      - TZ=Asia/Seoul

    # Load environment variables from .env file
    env_file:
      - ${HOME}/.secrets/lottobot/.env

    volumes:
      # Read-only mount for credentials
      - ${HOME}/.secrets/lottobot/credentials:/root/.dhapi/credentials:ro
      # Read-only mount for .env file (for manual access if needed)
      - ${HOME}/.secrets/lottobot/.env:/app/.env:ro
      # Persistent log directory (read-write)
      - ${HOME}/docker/lottobot/logs:/app/log

    # No ports needed - cron-based application

    # Keep container running with cron daemon
    tty: true
    stdin_open: true

    # Optional: Add labels for organization
    labels:
      - "app=lottobot"
      - "type=scheduler"
      - "description=Korean Lotto 6/45 automated checker and purchaser"
